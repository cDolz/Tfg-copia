<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="name-surname">
    <div class="name">
      <div class="input-icon-container">
        <input type="text" placeholder="Nombre" formControlName="name" (focus)="showNameErrors = true"
          (blur)="showNameErrors = false" />
        <i *ngIf="f['name'].invalid && f['name'].touched && !showNameErrors" class="material-symbols-outlined">error</i>
      </div>
      <div *ngIf="f['name'].invalid && f['name'].touched && showNameErrors">
        <span class="error-span" *ngIf="f['name']?.errors?.['required']">*Campo requerido</span>
      </div>
    </div>
    <div class="name">
      <div class="input-icon-container">
        <input type="text" placeholder="Apellidos" formControlName="surname" (focus)="showSurnameErrors = true"
          (blur)="showSurnameErrors = false" />
        <i *ngIf="f['surname'].invalid && f['surname'].touched && !showSurnameErrors"
          class="material-symbols-outlined">error</i>
      </div>
      <div *ngIf="f['surname'].invalid && f['surname'].touched && showSurnameErrors">
        <span class="error-span" *ngIf="f['surname']?.errors?.['required']">*Campo requerido</span>
      </div>
    </div>
  </div>
  <div class="input-div">
    <div class="input-icon-container">
      <input type="email" placeholder="Correo electrónico" formControlName="email" (focus)="showEmailErrors = true"
        (blur)="showEmailErrors = false" />
      <i *ngIf="f['email'].touched && f['email'].invalid && !showEmailErrors"
        class="material-symbols-outlined">error</i>
    </div>
    <div *ngIf="f['email'].touched && f['email'].invalid && showEmailErrors">
      <span class="error-span" *ngIf="f['email']?.errors?.['required']">*Campo requerido</span>
      <span class="error-span" *ngIf="f['email']?.errors?.['email']">*Formato de email incorrecto</span>
    </div>
  </div>
  <div class="input-div">
    <div class="input-icon-container">
      <input type="password" placeholder="Contraseña" formControlName="password" (focus)="showPasswordErrors = true"
        (blur)="showPasswordErrors = false" />
      <i *ngIf="f['password'].touched && f['password'].invalid && !showPasswordErrors"
        class="material-symbols-outlined">error</i>
    </div>
    <div *ngIf="f['password'].touched && f['password'].invalid && showPasswordErrors">
      <span class="error-span" *ngIf="f['password']?.errors?.['required']">*Campo requerido</span>
      <span class="error-span" *ngIf="f['password']?.errors?.['minlength'] 
      || f['password']?.errors?.['maxlength']
      || f['password']?.errors?.['pattern']">*debe tener de 8 a 20 caracteres, mayúscula,<br>
        minúscula, número y caracter
        especial</span>
    </div>
  </div>
  <div class="input-div">
    <div class="input-icon-container">
      <input type="password" placeholder="Repetir contraseña" formControlName="repeatPassword"
        (focus)="showRepeatPasswordErrors = true" (blur)="showRepeatPasswordErrors = false" />
      <i *ngIf="f['repeatPassword'].touched && f['repeatPassword'].invalid && !showRepeatPasswordErrors"
        class="material-symbols-outlined">error</i>
    </div>
    <div *ngIf="f['repeatPassword'].touched && f['repeatPassword'].invalid && showRepeatPasswordErrors">
      <span class="error-span" *ngIf="f['repeatPassword']?.errors?.['required']">*Campo requerido</span>
      <span class="error-span" *ngIf="f['repeatPassword']?.errors?.['mustMatch']">*Las contraseñas deben
        coincidir</span>
    </div>
  </div>
  <div class="date">
    <select formControlName="day" (focus)="markSelectAsTouched()">
      <option *ngFor="let day of days" [value]="day.toString().padStart(2,'0')">{{ day }}</option>
    </select>
    <select formControlName="month" (focus)="markSelectAsTouched()">
      <option *ngFor="let month of months" [value]="month.number">
        {{ month.name }}
      </option>
    </select>
    <select formControlName="year" (focus)="markSelectAsTouched()">
      <option *ngFor="let year of years" [value]="year">{{ year }}</option>
    </select>    
  </div>
  <div class="date-errors">
    <i *ngIf="f['day'].touched && f['day'].invalid" class="material-symbols-outlined">error</i>
    <span class="error-span" *ngIf="f['day'].touched && f['day'].invalid">*Debes ser mayor de 18 años<br>para registrarte</span>
  </div>
  <button [disabled]="!form || !form.valid || !form.dirty" type="submit">Registrarse</button>
</form>